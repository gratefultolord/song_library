# Online Song Library Service

## Описание проекта
Онлайн-библиотека песен — это веб-сервис, позволяющий пользователям управлять коллекцией песен. С помощью REST API можно добавлять новые песни, получать список песен, обновлять информацию о песнях и удалять их. Проект предоставляет документацию Swagger для удобства разработки.

## Стек технологий
- **Язык программирования**: Go (Golang)
- **Фреймворк для маршрутизации**: Gorilla Mux
- **База данных**: PostgreSQL
- **ORM**: GORM
- **Документация API**: Swagger (swaggo)
- **Тестирование**: Go testing
- **Управление зависимостями**: Go Modules

## Функционал
1. **REST API для управления песнями**:
    - Получение списка песен с фильтрацией по полям и пагинацией.
    - Получение информации о конкретной песне по ID.
    - Добавление новой песни (обязательные поля: `group` и `song`).
    - Частичное обновление данных о песне.
    - Полное обновление данных о песне по ID.
    - Удаление песни по ID.

2. **Документация Swagger**:
    - Доступна по пути `/swagger/index.html` для удобного тестирования и ознакомления с API.

3. **Логирование**:
    - Логи `info`, `debug`, и `error` используются для отслеживания выполнения операций и диагностики проблем.

## Установка и запуск проекта

### Предварительные требования
- Установленный Go (версии 1.16 или выше).
- PostgreSQL база данных.
- Установленный `swag` для генерации Swagger-документации:
  ```bash
  go install github.com/swaggo/swag/cmd/swag@latest
  ```

### Шаги установки
1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/gratefultolord/song_library.git
   ```

2. Перейдите в директорию проекта:
   ```bash
   cd song_library
   ```

3. Установите зависимости:
   ```bash
   go mod tidy
   ```

4. Создайте файл `.env` и заполните его следующими параметрами:
   ```env
   POSTGRES_CONN=postgres://username:password@localhost:5432/song_library
   SERVER_ADDRESS=0.0.0.0:8080
   ```

5. Выполните миграции для базы данных при запуске сервера.

6. Сгенерируйте Swagger-документацию:
   ```bash
   swag init
   ```

7. Запустите сервер:
   ```bash
   go run main.go
   ```

### Запуск тестов
Для запуска тестов выполните команду:
```bash
go test ./...
```

## Примеры использования API

### Получение списка песен
**GET** `/songs`
- Параметры фильтрации: `group`, `song`, `releaseDate`.
- Параметры пагинации: `page`, `limit`.

### Добавление новой песни
**POST** `/song`
- Тело запроса (обязательные поля: `group`, `song`):
  ```json
  {
    "group": "Queen",
    "song": "Bohemian Rhapsody",
    "releaseDate": "31.10.1975",
    "text": "Is this the real life? Is this just fantasy?",
    "link": "https://youtu.be/fJ9rUzIMcZQ?si=Yc3_wAQH0rd0nHHs"
  }
  ```

### Частичное обновление песни
**PATCH** `/song/{id}`
- Тело запроса (обновляемые поля):
  ```json
  {
    "releaseDate": "31.10.1975"
  }
  ```

